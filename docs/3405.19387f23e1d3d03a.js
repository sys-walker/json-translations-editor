"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3405],{3405:(p,c,a)=>{a.r(c),a.d(c,{FilePickerWeb:()=>m});var o=a(5861),d=a(7423);class m extends d.Uw{constructor(){super(...arguments),this.ERROR_PICK_FILE_CANCELED="pickFiles canceled."}pickFiles(e){var t=this;return(0,o.Z)(function*(){const i=yield t.openFilePicker(e);if(!i)throw new Error(t.ERROR_PICK_FILE_CANCELED);const r={files:[]};for(const n of i){const l={path:void 0,name:t.getNameFromUrl(n),mimeType:t.getMimeTypeFromUrl(n),size:t.getSizeFromUrl(n),blob:n};e?.readData&&(l.data=yield t.getDataFromFile(n)),r.files.push(l)}return r})()}openFilePicker(e){var t=this;return(0,o.Z)(function*(){var i;const r=(null===(i=e?.types)||void 0===i?void 0:i.join(","))||"",n=!!e?.multiple;return new Promise(l=>{let u=!1;const s=document.createElement("input");s.type="file",s.accept=r,s.multiple=n,s.addEventListener("change",()=>{u=!0;const f=Array.from(s.files||[]);l(f)},{once:!0}),window.addEventListener("focus",(0,o.Z)(function*(){yield t.wait(1e3),!u&&l(void 0)}),{once:!0}),s.click()})})()}getDataFromFile(e){return(0,o.Z)(function*(){return new Promise((t,i)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{const u=("string"==typeof r.result?r.result:"").split("base64,")[1]||"";t(u)},r.onerror=n=>{i(n)}})})()}getNameFromUrl(e){return e.name}getMimeTypeFromUrl(e){return e.type}getSizeFromUrl(e){return e.size}wait(e){return(0,o.Z)(function*(){return new Promise(t=>setTimeout(t,e))})()}}}}]);